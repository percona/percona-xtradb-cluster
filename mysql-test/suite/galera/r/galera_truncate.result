#node-2 (restarting at start)
# restart
CREATE TABLE t1 (f1 INTEGER PRIMARY KEY) Engine=InnoDB;
INSERT INTO t1 VALUES (1);
TRUNCATE TABLE t1;
SELECT COUNT(*) = 0 FROM t1;
COUNT(*) = 0
1
SELECT COUNT(*) = 0 FROM t1;
COUNT(*) = 0
1
CREATE TABLE t2 (f1 VARCHAR(255)) Engine=InnoDB;
INSERT INTO t2 VALUES ('abc');
TRUNCATE TABLE t2;
SELECT COUNT(*) = 0 FROM t2;
COUNT(*) = 0
1
#node-1
CREATE TABLE t3 (f1 INTEGER AUTO_INCREMENT PRIMARY KEY) Engine=InnoDB;
INSERT INTO t3 VALUES (DEFAULT),(DEFAULT),(DEFAULT),(DEFAULT),(DEFAULT);
select * from t3;
f1
1
3
5
7
9
CREATE TABLE t4 (f1 INTEGER AUTO_INCREMENT PRIMARY KEY) Engine=InnoDB AUTO_INCREMENT=1234;
INSERT INTO t4 VALUES (DEFAULT),(DEFAULT),(DEFAULT),(DEFAULT),(DEFAULT);
select * from t4;
f1
1235
1237
1239
1241
1243
#node-1 auto-inc values before truncate
SELECT TABLE_NAME, AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME IN ('t3', 't4');
TABLE_NAME	AUTO_INCREMENT
t3	11
t4	1245
#node-2 auto-inc values before truncate
SELECT TABLE_NAME, AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME IN ('t3', 't4');
TABLE_NAME	AUTO_INCREMENT
t3	10
t4	1244
#node-1
TRUNCATE TABLE t3;
TRUNCATE TABLE t4;
#node-1 auto-inc values after truncate
SELECT TABLE_NAME, AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME IN ('t3', 't4');
TABLE_NAME	AUTO_INCREMENT
t3	11
t4	1245
#node-2 auto-inc values after truncate
SELECT TABLE_NAME, AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME IN ('t3', 't4');
TABLE_NAME	AUTO_INCREMENT
t3	10
t4	1244
DROP TABLE t1;
DROP TABLE t2;
DROP TABLE t3;
DROP TABLE t4;
